---
import type { CollectionEntry } from 'astro:content';
import TagList from './TagList.astro';

interface Props {
	post: CollectionEntry<'blog'>;
	readingTime: string;
}

const { post, readingTime } = Astro.props;
const { title, pubDate, updatedDate, tags, heroImage } = post.data;

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
	year: 'numeric',
	month: 'long',
	day: 'numeric'
});

const formattedUpdatedDate = updatedDate ? new Date(updatedDate).toLocaleDateString('en-US', {
	year: 'numeric',
	month: 'long',
	day: 'numeric'
}) : null;
---

<header class="post-header">
	<nav class="breadcrumb">
		<a href="/">Home</a>
		<span class="separator">/</span>
		<a href="/">Blog</a>
		<span class="separator">/</span>
		<span class="current">{title}</span>
	</nav>

	<h1 class="post-title gradient-text">{title}</h1>

	<div class="post-meta">
		<time datetime={pubDate.toISOString()}>{formattedDate}</time>
		{formattedUpdatedDate && (
			<>
				<span class="separator">•</span>
				<span class="updated">Updated {formattedUpdatedDate}</span>
			</>
		)}
		<span class="separator">•</span>
		<span class="reading-time">{readingTime}</span>
	</div>

	{tags.length > 0 && (
		<div class="post-tags">
			<TagList tags={tags} />
		</div>
	)}

	{heroImage && (
		<div class="hero-image">
			<img src={heroImage} alt={title} />
		</div>
	)}

	<div class="gradient-divider"></div>
</header>

<style>
	.post-header {
		margin-bottom: 3rem;
	}

	.breadcrumb {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.875rem;
		color: var(--color-text-muted);
		margin-bottom: 2rem;
		font-family: var(--font-mono);
	}

	.breadcrumb a {
		color: var(--color-primary);
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.breadcrumb a:hover {
		color: var(--color-accent);
	}

	.breadcrumb .separator {
		opacity: 0.5;
	}

	.breadcrumb .current {
		color: var(--color-text-medium);
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		max-width: 200px;
	}

	.post-title {
		font-size: clamp(2rem, 5vw, 3rem);
		font-weight: 900;
		line-height: 1.2;
		margin: 0 0 1.5rem;
		letter-spacing: -0.02em;
	}

	.post-meta {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 0.75rem;
		font-size: 0.875rem;
		color: var(--color-text-muted);
		margin-bottom: 1.5rem;
		font-family: var(--font-mono);
	}

	.post-meta .separator {
		opacity: 0.5;
	}

	.post-meta .reading-time {
		color: var(--color-primary);
	}

	.post-meta .updated {
		font-style: italic;
	}

	.post-tags {
		margin-bottom: 2rem;
	}

	.hero-image {
		width: 100%;
		max-height: 400px;
		overflow: hidden;
		border-radius: var(--radius-xl);
		margin: 2rem 0;
		border: 1px solid rgba(59, 130, 246, 0.2);
	}

	.hero-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.gradient-divider {
		height: 3px;
		background: linear-gradient(90deg, var(--color-primary), var(--color-accent), transparent);
		margin-top: 2rem;
		border-radius: 999px;
	}

	@media screen and (max-width: 768px) {
		.post-title {
			font-size: 2rem;
		}

		.breadcrumb .current {
			max-width: 120px;
		}

		.hero-image {
			max-height: 250px;
		}
	}
</style>
